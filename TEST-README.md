# 🧪 FOODCORT TERMINAL - КОМПЛЕКСНОЕ ТЕСТИРОВАНИЕ

Этот проект содержит комплексные тесты для проверки всех функций терминала FOODCORT от начала до конца.

## 📋 Что тестируется

### 🔐 Авторизация и сессии

- ✅ Авторизация в терминале с тестовыми данными
- ✅ Сохранение и очистка сессии
- ✅ Управление состоянием авторизации

### 🛒 Каталог и товары

- ✅ Получение каталога товаров с API
- ✅ Получение категорий товаров
- ✅ Получение рекламных баннеров
- ✅ Структура данных товаров

### 🛍️ Корзина покупок

- ✅ Добавление товаров в корзину
- ✅ Изменение количества товаров
- ✅ Удаление товаров из корзины
- ✅ Очистка корзины
- ✅ Расчет общей стоимости

### ⚙️ Конфигурация товаров

- ✅ Выбор типа товара (размер, вес)
- ✅ Добавление дополнений
- ✅ Удаление ингредиентов
- ✅ Расчет цены с учетом модификаций

### 🎯 Система лояльности

- ✅ Ввод номера телефона
- ✅ Валидация формата номера
- ✅ Сохранение данных лояльности

### 📦 Оформление заказа

- ✅ Выбор способа получения (доставка/самовывоз)
- ✅ Подтверждение заказа
- ✅ Генерация номера заказа
- ✅ Таймер автоматического перехода

### 🛠️ Утилиты и компоненты

- ✅ Функция pluralize для склонения слов
- ✅ Определение типа файлов
- ✅ Zustand stores (cart, session, auth)
- ✅ Валидация форм
- ✅ Логика расчета цен
- ✅ Генерация уникальных ID товаров

## 🚀 Запуск тестов

### Предварительные требования

1. Убедитесь, что API сервер запущен на `http://localhost:3006`
2. Убедитесь, что у вас есть Node.js установлен

### Команды для запуска

```bash
# Запуск всех интеграционных тестов (API + бизнес-логика)
npm run test

# Запуск тестов компонентов (React логика)
npm run test:components

# Запуск всех тестов подряд
npm run test:all
```

### Ручной запуск

```bash
# Интеграционные тесты
node test-integration.js

# Тесты компонентов
node test-components.js
```

## 📊 Структура тестов

### `test-integration.js`

Основной файл интеграционных тестов:

- Тестирует реальные API вызовы
- Проверяет работу с внешними сервисами
- Симулирует полный пользовательский сценарий
- Проверяет бизнес-логику приложения

### `test-components.js`

Файл тестов компонентов:

- Тестирует логику Zustand stores
- Проверяет утилиты и хелперы
- Валидирует формы и данные
- Симулирует работу React компонентов

## 🎯 Тестовые данные

### Авторизация

- **Email**: `lebedevvv@volcov.ru`
- **Password**: `djF&2Lip`

### API Endpoints

- **Базовый URL**: `http://localhost:3006/api/foodcord`
- **Товары**: `/product-main`
- **Категории**: `/groups`
- **Баннеры**: `/banner-main`
- **Авторизация**: `/auth/login`

## 📈 Результаты тестирования

После запуска тестов вы увидите:

- ✅ Количество пройденных тестов
- ❌ Количество проваленных тестов
- ⏭️ Количество пропущенных тестов
- ⏱️ Время выполнения
- 📈 Процент успешности

### Пример вывода:

```
🚀 ЗАПУСК КОМПЛЕКСНОГО ТЕСТИРОВАНИЯ FOODCORT TERMINAL
════════════════════════════════════════════════════════════════

🧪 Тестируем: Авторизация в терминале
✅ Авторизация в терминале: PASS
   Успешная авторизация с тестовыми данными

🧪 Тестируем: Получение каталога товаров
✅ Получение каталога товаров: PASS
   Загружено 15 товаров

📊 РЕЗУЛЬТАТЫ ТЕСТИРОВАНИЯ
════════════════════════════════════════════════════════════════
Всего тестов: 20
✅ Пройдено: 18
❌ Провалено: 2
⏭️  Пропущено: 0
⏱️  Время выполнения: 1250ms
📈 Успешность: 90.0%

🎉 ВСЕ ТЕСТЫ ПРОЙДЕНЫ УСПЕШНО!
Система FOODCORT TERMINAL работает корректно!
```

## 🔧 Настройка и отладка

### Если тесты не проходят:

1. **Проверьте API сервер**:

   ```bash
   curl http://localhost:3006/api/foodcord/groups
   ```

2. **Проверьте доступность портов**:

   - API: `localhost:3006`
   - Frontend: `localhost:3000`

3. **Проверьте логи сервера** на наличие ошибок

4. **Убедитесь в правильности тестовых данных**

### Добавление новых тестов

Для добавления новых тестов:

1. Откройте соответствующий файл (`test-integration.js` или `test-components.js`)
2. Добавьте новый метод в класс тестера
3. Вызовите его в методе `runAllTests()`
4. Используйте `this.logTest()` для вывода результатов

## 🎨 Цветовая схема

- 🟢 **Зеленый**: Успешные тесты
- 🔴 **Красный**: Проваленные тесты
- 🟡 **Желтый**: Предупреждения и информация
- 🔵 **Синий**: Заголовки и важная информация
- 🟣 **Фиолетовый**: Детали тестов

## 📝 Примечания

- Тесты используют реальные API вызовы, поэтому требуют запущенный сервер
- Некоторые тесты симулируют работу компонентов без реального рендеринга
- Все тесты выполняются последовательно для стабильности
- Время выполнения может варьироваться в зависимости от скорости API

## 🤝 Поддержка

Если у вас возникли проблемы с тестами:

1. Проверьте, что все зависимости установлены
2. Убедитесь, что API сервер запущен
3. Проверьте логи на наличие ошибок
4. Убедитесь в правильности конфигурации

---

**Удачного тестирования! 🚀**
